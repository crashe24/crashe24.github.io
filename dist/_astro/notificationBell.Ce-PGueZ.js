import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.JXKNaeUN.js";import{a as g}from"./index.DkHJdna-.js";import"./iconBase.BY00fp9U.js";function b(){const[r,l]=s.useState(!1),[a,d]=s.useState([]),c=s.useRef(null),n=[{id:1,text:"Nuevo proyecto publicado ðŸš€",read:!1},{id:2,text:"Hey como va?, te comento que actualmente estoy aprendiendo n8n âœ¨",read:!1}],f=n.length>0?n[n.length-1].id:null;a.length>0&&[...a].reverse().find(e=>!e.read)?.id,s.useEffect(()=>{const e=localStorage.getItem("notifications");let i=n;if(e){const p=JSON.parse(e),h=new Map(p.map(o=>[o.id,o]));i=n.map(o=>h.get(o.id)||o)}d(i)},[]),s.useEffect(()=>{a.length>0&&localStorage.setItem("notifications",JSON.stringify(a))},[a]);const x=a.filter(e=>!e.read),m=a.filter(e=>e.read),u=x.length;return s.useEffect(()=>{function e(i){c.current&&!c.current.contains(i.target)&&l(!1)}return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),s.useEffect(()=>{r&&u>0&&d(e=>e.map(i=>({...i,read:!0})))},[r]),t.jsxs("div",{ref:c,className:"relative",children:[t.jsxs("button",{type:"button","aria-expanded":r,"aria-label":"Notificaciones",onClick:()=>l(e=>!e),className:"relative rounded-full p-2 hover:bg-gray-700",children:[t.jsx(g,{className:"text-2xl text-white cursor-pointer"}),u>0&&f&&t.jsx("span",{className:"absolute top-0 right-0 inline-flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:f})]}),r&&t.jsx("div",{className:"absolute right-0 z-50 mt-2 w-70 max-w-sm rounded-lg border-none bg-gray-900 shadow-lg drop-shadow-[4px_4px_0_#7836cf]",children:t.jsxs("div",{className:"p-3",children:[t.jsx("div",{className:"mb-2 flex items-center justify-between",children:t.jsx("h4",{className:"text-xm font-bold text-gray-200 drop-shadow-[1px_1px_0_#7836cf]",children:"Notificaciones"})}),m.length>0?t.jsx("ul",{className:"max-h-48 divide-y divide-gray-800 overflow-auto",children:m.map(e=>t.jsx("li",{className:"py-2 text-sm text-gray-400",children:e.text},e.id))}):t.jsx("p",{className:"text-sm text-gray-400",children:"No hay notificaciones."})]})})]})}export{b as default};
